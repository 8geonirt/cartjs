// Cart.js
// version: 0.0.1
// author: Gavin Ballard
// license: MIT
(function(){var a,b,c,d;a={settings:{autoCommit:!1},cart:null},b=[],d=[],c=!1,a.enqueue=function(e,f,g,h,i){var j;return null==h&&(h="POST"),null==i&&(i="json"),j=b,c&&a.settings.autoCommit&&(j=d),j.push({url:e,data:f,callback:g,type:h,dataType:i}),a.settings.autoCommit?a.commit():void 0},a.commit=function(){return c?void 0:(c=!0,[].push.apply(d,b.splice(0,b.length)),a.process())},a.process=function(){var a;return d.length?(a=d.shift(),a.complete=process,jQuery.ajax(a)):void(c=!1)},a.addItem=function(b,c,d){var e;return null==c&&(c=1),null==d&&(d={}),e=a.wrapKeys(d,"properties"),e.id=b,e.quantity=c,enqueue("/cart/add.js",e)},a.updateItem=function(b,c,d){var e;return null==c&&(c=1),null==d&&(d={}),e=a.wrapKeys(d,"properties"),e.line=b,e.quantity=c,enqueue("/cart/change.js",e)},a.removeItem=function(b){return a.updateItem(b,0)},a.clearItems=function(){return enqueue("/cart/clear.js")},a.getAttribute=function(b,c){return b in a.cart.attributes?a.cart.attributes[b]:c},a.setAttribute=function(b,c){a.cart.attributes[b]=c},a.getAttributes=function(){return a.cart.attributes},a.setAttributes=function(b){var c,d;null==b&&(b={});for(c in b)d=b[c],a.setAttribute(c,d)},a.factory=function(b){return b._=a,b.settings=a.settings,b.configure=function(b){var c,d;null==b&&(b={});for(c in b)d=b[c],a.settings[c]=d},b.init=function(c,d){null==d&&(d={}),a.cart=c,b.configure(d)},b.commit=a.commit,b.addItem=a.addItem,b.removeItem=a.removeItem,b.updateItem=a.updateItem,b.clearItems=a.clearItems,b.getAttribute=a.getAttribute,b.setAttribute=a.setAttribute,b.getAttributes=a.getAttributes,b.setAttributes=a.setAttributes},"object"==typeof exports?a.factory(exports):"function"==typeof define&&define.amd?define(["exports"],function(b){return a.factory(this.Cart=b),b}):a.factory(this.Cart={})}).call(this);